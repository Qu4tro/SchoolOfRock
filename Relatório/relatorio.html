<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"><script src="https://code.jquery.com/jquery-1.11.0.min.js"></script><style type="text/css">
                    .col-center{
                        float:none;
                        margin-left:auto;
                        margin-right:auto;
                    }</style><title>Relat&oacute;rio</title>
   </head>
   <body>
      <div class="container">
         <div class="col-md-12 text-center">
            <div class="row">
               <div class="col-md-12">
                  <h2 style="color:#c0392b">Processamento de Linguagens e Conhecimento</h2>
                  <h3 style="color:#e74c3c">Um Gestor de Audi&ccedil;&otilde;es/Concertos Musicais</h3>
               </div>
            </div>
            <div class="row">
               <div class="col-md-6 col-center">
                  <div class="col-md-4">
                     <div class="row"><strong>Patr&iacute;cia Barros</strong></div>
                     <div class="row">a67665</div>
                     <div class="row"><a href="mailto:a67665@alunos.uminho.pt">a67665@alunos.uminho.pt</a></div>
                     <div class="row"><img style="width: 100px" src="7.jpg"></div>
                  </div>
                  <div class="col-md-4">
                     <div class="row"><strong>Xavier Francisco</strong></div>
                     <div class="row">a67725</div>
                     <div class="row"><a href="mailto:a67725@alunos.uminho.pt">a67725@alunos.uminho.pt</a></div>
                     <div class="row"><img style="width: 100px" src="4.jpg"></div>
                  </div>
               </div>
            </div>
            <div class="row" style="margin-top:30px">
               <div class="col-md-12">
                  <div class="row">
                     <h4>2016-01-18</h4>
                  </div>
                  <div class="row">
                     <h4>Universidade do Minho</h4>
                  </div>
               </div>
            </div>
         </div>
                     
         <p>Este relat&oacute;rio descreve todo o processo de desenvolvimento e decis&otilde;es tomadas para a realiza&ccedil;&atilde;o do trabalho final do perfil
            de Processamento de Linguagens e Compiladores.
         </p>
                     
         <p>O problema a resolver consiste na cria&ccedil;&atilde;o de um sistema que permita a gest&atilde;o de audi&ccedil;&otilde;es musicais de uma escola de m&uacute;sica.</p>
                 
         <div class="col-md-12">
            <div class="row">
               <p class="bg-info">Ind&iacute;ce:</p>
               <ul>
                  <li><a style="color:#2ecc71" href="#d0e67">Estrutura do Relat&oacute;rio</a></li>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d0e85">Introdu&ccedil;&atilde;o</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e90">Contextualiza&ccedil;&atilde;o</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e99">Objetivos</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e108">Motiva&ccedil;&atilde;o</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e117">Ferramentas</a></li>
                  </ul>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d0e204">Desenvolvimento</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e209">Arquitetura do Sistema</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e242">Base de Dados</a></li>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e262">Modelos</a></li>
                     </ul>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e365">Funcionalidades</a></li>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e373">Listar Alunos/Professores</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e409">Adicionar um Aluno/Professor</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e454">Alterar um Aluno/Professor</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e508">Remover um Aluno/Professor/Audi&ccedil;&atilde;o</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e535">Listar Audi&ccedil;&otilde;es</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e571">Adicionar uma Audi&ccedil;&atilde;o</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e628">Gerar PDF para uma Audi&ccedil;&atilde;o</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d0e658">Gerar p&aacute;gina HTML para uma Audi&ccedil;&atilde;o</a></li>
                     </ul>
                  </ul>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d0e703">Conclus&otilde;es</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e708">Reflex&atilde;o Crit&iacute;ca</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d0e756">Trabalho Futuro</a></li>
                  </ul>
               </ul>
            </div>
         </div>
         <div class="col-md-12">
            <div class="row">
               <p class="bg-success">Ind&iacute;ce de Figuras:</p>
               <ul>
                  <li><a style="color:#3498db" href="#d0e217">Desenho da arquitetura do Sistema</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e292">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o dos alunos.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e322">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o dos professores.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e355">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o das audi&ccedil;&otilde;es.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e396">Exemplo da listagem de professores.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e447">Exemplo de preenchimento do formul&aacute;rio de cria&ccedil;&atilde;o de um aluno.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e450">Exemplo de preenchimento do formul&aacute;rio de cria&ccedil;&atilde;o de um professor.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e504">Exemplo da altera&ccedil;&atilde;o de um aluno.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e561">Listagem de todas as audi&ccedil;&otilde;es</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e564">Listagem das audi&ccedil;&otilde;es que j&aacute; decorreram</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e567">Listagem das audi&ccedil;&otilde;es que ainda v&atilde;o decorrer</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d0e696">HTML gerado para a audi&ccedil;&atilde;o</a></li>
               </ul>
            </div>
         </div>
         <hr>
         <div class="col-md-12"><a name="d0e67"></a>
                        
            <h2 style="color:#c0392b">Estrutura do Relat&oacute;rio</h2>
                       
            <p>Este relat&oacute;rio est&aacute; organizado em cap&iacute;tulos e sec&ccedil;&otilde;es. No cap&iacute;tulo 1 podemos encontrar um apanhado de informa&ccedil;&otilde;es sobre o
               projeto, nomeadamente sobre o contexto, motiva&ccedil;&atilde;o, objetivos e resultados do mesmo.
            </p>
                       
            <p>O cap&iacute;tulo 2  exp&otilde;e o enunciado do trabalho.</p>
                       
            <p>De seguida, o cap&iacute;tulo 3 engloba todas as sec&ccedil;&otilde;es relativas ao desenvolvimento do projeto: todas as decis&otilde;es tomadas e uma
               descri&ccedil;&atilde;o de tudo o que foi feito.
            </p>
                       
            <p>Por &uacute;ltimo, o cap&iacute;tulo 4 cont&eacute;m algumas conclus&otilde;es sobre o trabalho realizado, nomeadamente o estado do mesmo, o trabalho
               futuro e um coment&aacute;rio de opini&atilde;o pessoal.
            </p>
                    <a name="d0e85"></a>
                        
            <h2 style="color:#c0392b">Introdu&ccedil;&atilde;o</h2>
                        <a name="d0e90"></a>
                            
            <h3 style="color:#e74c3c">Contextualiza&ccedil;&atilde;o</h3>
                           
            <p>Este trabalho foi realizado no &acirc;mbito das Unidades Curriculares de Gram&aacute;ticas na Compreens&atilde;o de Software e Processamento e
               Representa&ccedil;&atilde;o de Informa&ccedil;&atilde;o, dizendo respeito &agrave;s mat&eacute;rias leccionadas em ambas: gram&aacute;ticas independentes de contexto, gram&aacute;ticas
               de atributos, DTD's, XPath, XSLT, XML Schema e formul&aacute;rios HTML.
            </p>
                        
                        <a name="d0e99"></a>
                            
            <h3 style="color:#e74c3c">Objetivos</h3>
                           
            <p>Este trabalho tem como objetivos consolidar todo o conhecimento adquirido ao longo do semestre nas duas Unidades Curriculares
               a que diz respeito mas tamb&eacute;m dar resposta a uma necessidade que existe atualmente no Mundo real, tornando ainda o projeto
               mais aliciante.
            </p>
                        
                        <a name="d0e108"></a>
                            
            <h3 style="color:#e74c3c">Motiva&ccedil;&atilde;o</h3>
                           
            <p>Atualmente praticamente nenhuma das aplica&ccedil;&otilde;es existentes para gerir escolas tem a funcionalidade de gerir audi&ccedil;&otilde;es ou concertos
               pois esta &eacute; uma necessidade espec&iacute;fica de uma escola de m&uacute;sica que ao longo de um ano letivo poder&aacute; ter que organizar dezenas
               ou centenas de audi&ccedil;&otilde;es e concertos. Posto isto &eacute; importante come&ccedil;ar a dar resposta &agrave;s escolas de m&uacute;sica nesse sentido.
            </p>
                        
                        <a name="d0e117"></a>
                            
            <h3 style="color:#e74c3c">Ferramentas</h3>
                           
            <p>Para o desenvolvimento deste projeto foram necess&aacute;rias v&aacute;rias ferramentas de desenvolvimento que passamos a nomear.</p>
                           
            <p>Para gerir o desenvolvimento de c&oacute;digo em paralelo pelos dois membros da equipa utilizamos uma ferramenta de controlo de vers&otilde;es,
               o <em><strong>Github</strong></em>.
            </p>
                           
            <p>Para o desenvolvimento propriamente dito do projeto utilizamos <em><strong>HTML</strong></em>, <em><strong>PHP</strong></em> e <em><strong>Javascript</strong></em>. Recorremos ainda ao <em><strong>CSS</strong></em> para melhorar o aspeto est&eacute;tico do sistema. Utiliz&aacute;mos ainda algomas funcionalidades do <em><strong>Bootsrap</strong></em>, nomeadamente para a formata&ccedil;&atilde;o das tabelas de listagem e dos bot&otilde;es.
            </p>
                           
            <p>Para lidar com os ficheiros de texto que guardam os dados do nosso sistema recorremos ao <em><strong>XML</strong></em> e utilizamos <em><strong>XSL</strong></em> para os transformar em ficheiros <em>javascript</em> e <em>html</em>. Utilizamos ainda <em><strong>XSL-FO</strong></em> para gerar um documento <em>PDF</em> a partir de um <em>XML</em></p>
                           
            <p>Utilizamos ainda <em><strong>ANTLR</strong></em> para criar uma linguagem de suporte a uma parte do nosso sistema.
            </p>
                           
            <p>Para facilitar o nosso trabalho recorremos a alguns <em>IDE's</em> como o <em><strong>Oxygen</strong></em> e o <em><strong>Intelij</strong></em>.
            </p>
                        
                    <a name="d0e204"></a>
                        
            <h2 style="color:#c0392b">Desenvolvimento</h2>
                        <a name="d0e209"></a>
                            
            <h3 style="color:#e74c3c">Arquitetura do Sistema</h3>
                            
            <p>Para come&ccedil;ar a descri&ccedil;&atilde;o do trabalho que realizamos segue-se um desenho da arquitetura do sistema para que seja facilmente
               percept&iacute;vel qual a abordagem que utilizamos.
            </p>
                            
            <div class="col-center text-center"><a name="d0e217"></a><img src="PLC.png"><br><p style="font-size:11px">Desenho da arquitetura do Sistema</p>
            </div>
                            
            <p>Apesar de o sistema ser um gestor de audi&ccedil;&otilde;es decidimos tamb&eacute;m manipular informa&ccedil;&atilde;o sobre os alunos e professores da escola
               de m&uacute;sica.
            </p>
                            
            <p>O utilizador pode consultar toda a informa&ccedil;&atilde;o sobre essas tr&ecirc;s entidades, sendo que os dados s&atilde;o extra&iacute;dos dos ficheiros <em>XML</em> pr&eacute;-definidos (alunos.xml, professores.xml e audicoes.xml) atrav&eacute;s de um <em>XSL</em> que gera um <em>HTML</em>.
            </p>
                            
            <p>Ao alterar/adicionar dados, estes s&atilde;o validados e posteriormente adicionados aos ficheiros <em>XML</em> correspondentes.
            </p>
                        
                        <a name="d0e242"></a>
                            
            <h3 style="color:#e74c3c">Base de Dados</h3>
                            
            <p>Decidimos utilizar ficheiros <em>XML</em> para guardar todos os dados relevantes da escola de m&uacute;sica: alunos, professores, cursos, instrumentos, audi&ccedil;&otilde;es, obras e
               compositores. Para cada uma destas entidades existe um ficheiro <em>XML</em> que lhe oferece suporte.
            </p>
                            
            <p>Passamos ent&atilde;o a descrever a estrutura dos documentos <em>XML</em> utilizados para suportar toda a indorma&ccedil;&atilde;o do sistema.
            </p>
                            <a name="d0e262"></a>
                                
            <h4 style="color:#2ecc71">Modelos</h4>
                                
            <p><strong>Aluno:</strong></p>
                                
                                    
            <ul>c&oacute;digo/identificador &uacute;nico;</ul>
                                    
            <ul>nome;</ul>
                                    
            <ul>data de nascimento;</ul>
                                    
            <ul>curso em que est&aacute; matriculado;</ul>
                                    
            <ul>ano do curso que frequenta;</ul>
                                    
            <ul>instrumento que toca;</ul>
                                
                                
            <div class="col-center text-center"><a name="d0e292"></a><img src="dtdAlunos.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o dos alunos.</p>
            </div>
                                
            <p><strong>Professor:</strong></p>
                                
                                    
            <ul>c&oacute;digo/identificador &uacute;nico;</ul>
                                    
            <ul>nome;</ul>
                                    
            <ul>data de nascimento;</ul>
                                    
            <ul>abilita&ccedil;&atilde;o acad&eacute;mica (que n&iacute;vel de forma&ccedil;&atilde;o tem e em qu&ecirc;);</ul>
                                    
            <ul>curso que lecciona;</ul>
                                
                                
            <div class="col-center text-center"><a name="d0e322"></a><img src="dtdProfessores.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o dos professores.</p>
            </div>
                                
            <p><strong>Audi&ccedil;&atilde;o:</strong></p>
                                
                                    
            <ul>nome/t&iacute;tulo;</ul>
                                    
            <ul>local;</ul>
                                    
            <ul>data;</ul>
                                    
            <ul>dura&ccedil;&atilde;o esperada;</ul>
                                    
            <ul>hora de inicio;</ul>
                                    
            <ul>atua&ccedil;oes: cada atua&ccedil;ao tem um nome, dura&ccedil;&atilde;o e uma lista de alunos e professores;</ul>
                                
                                
            <div class="col-center text-center"><a name="d0e355"></a><img src="dtdAudicoes.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informa&ccedil;&atilde;o das audi&ccedil;&otilde;es.</p>
            </div>
                            
                        
                        <a name="d0e365"></a>
                            
            <h3 style="color:#e74c3c">Funcionalidades</h3>
                            
            <p>Passamos agora a descrever detalhadamente como foi implementada cada uma das funcionalidades que o nosso sistema tem para
               oferecer e todas as decis&otilde;es tomadas em rela&ccedil;&atilde;o a elas.
            </p>
                            <a name="d0e373"></a>
                                
            <h4 style="color:#2ecc71">Listar Alunos/Professores</h4>
                                
            <p>Os alunos e professores s&atilde;o listados da mesma forma: a partir do ficheiro <em>XML</em> pr&eacute;-definido (alunos.xml) &eacute; gerado um ficheiro .js atrav&eacute;s de um processador <em>XSLT</em> que cont&eacute;m algumas informa&ccedil;&otilde;es sobre os elementos (id, nome e instrumento/curso) guardadas em arrays. Na p&aacute;gina em que &eacute;
               apresentada a listagem &eacute; carregado um outro .js que povoa a tabela de acordo com os arrays de informa&ccedil;&otilde;es dispon&iacute;veis. S&atilde;o
               ainda adicionados para cada elemento tr&ecirc;s bot&otilde;es que d&atilde;o acesso &agrave;s funcionalidades de consultar, alterar e remover.
            </p>
                                
            <p>A tabela em que s&atilde;o apresentados os resultados &eacute; paginada, ou seja, s&atilde;o apresentados no m&aacute;ximo 20 resultados por p&aacute;gina e
               &eacute; poss&iacute;vel navegar para outras p&aacute;ginas. Isto foi conseguido atrav&eacute;s de uma biblioteca <em>javascript</em> j&aacute; existente chamada <em>pagination.js</em>.
            </p>
                                
            <div class="col-center text-center"><a name="d0e396"></a><img src="listarAlunos.png"><br><p style="font-size:11px">Exemplo da listagem de professores.</p>
            </div>
                                
            <p>Segue-se o ficheiro .js utilizado para povoar a tabela de alunos, sendo que a <em>script</em> para povoar a tabela dos professores &eacute; id&ecirc;ntica.
            </p>
                                <pre style="background-color:#F5FFFA">
        var index=0;
        $(document).ready(function(){
        for(index=0;index &lt; nomes.length;index++){
            $("#alunos").append("&lt;tr&gt;&lt;td&gt;"+ids[index]+"&lt;/td&gt;
            &lt;td&gt;"+nomes[index]+"&lt;/td&gt;
            &lt;td&gt;"+instrumentos[index]+"&lt;/td&gt;
            &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'alterarAluno.php?idAluno="+ids[index]+"\'\" value=\"Alterar\"/&gt;&lt;/td&gt;
                &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'removerAluno.php?idAluno="+ids[index]+"\'\" value=\"Remover\"/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'consultarAluno.php?idAluno="+ids[index]+"\'\" value=\"Consultar\"/&gt;&lt;/td&gt;
                    &lt;/tr&gt;");
                        }
                        });
                    </pre>
                            
                            <a name="d0e409"></a>
                                
            <h4 style="color:#2ecc71">Adicionar um Aluno/Professor</h4>
                                
            <p>O ato de adicionar um aluno ou professor ao sistema &eacute; feito atrav&eacute;s de um formul&aacute;rio <em>HTML</em> com uma <em>script</em> de atendimento em <em>PHP</em> que utilizando <em>DOM</em> adiciona um novo elemento ao ficheiro <em>XML</em> com as informa&ccedil;&otilde;es recebidas do formul&aacute;rio.
            </p>
                                
            <p>De seguida mostra-se a <em>script PHP</em> utilizada para adicionar os elementos ao <em>XML</em>:
            </p>
                                <pre style="background-color:#F5FFFA">
&lt;?php
$logs = new DOMDocument(); 
$logs-&gt;load('alunos.xml');
 
$log = $logs-&gt;createElement('aluno');
$id = $logs-&gt;createAttribute('id');
$id-&gt;value = $_GET['id'];
$nome = $logs-&gt;createElement('nome',$_GET['nome']);
$dataNasc = $logs-&gt;createElement('dataNasc',$_GET['dataNasc']);
$curso = $logs-&gt;createElement('curso',$_GET['curso']);
$anoCurso = $logs-&gt;createElement('anoCurso',$_GET['ano']);
$instrumento = $logs-&gt;createElement('instrumento',$_GET['instrumentos']);
 
$log-&gt;appendChild($id);
$log-&gt;appendChild($nome);
$log-&gt;appendChild($dataNasc);
$log-&gt;appendChild($curso);
$log-&gt;appendChild($anoCurso);
$log-&gt;appendChild($instrumento);
 
$logs-&gt;documentElement-&gt;appendChild($log);
 
$logs-&gt;save("alunos.xml");

header("Location:alunos.html");
                    </pre>
                                <p>Seguem-se exemplos ilustrativos dos formul&aacute;rios de cria&ccedil;&atilde;o de um aluno e de um professor.</p>
                                
            <div class="col-center text-center"><a name="d0e447"></a><img src="adicionarAluno.png"><br><p style="font-size:11px">Exemplo de preenchimento do formul&aacute;rio de cria&ccedil;&atilde;o de um aluno.</p>
            </div>
                                
            <div class="col-center text-center"><a name="d0e450"></a><img src="adicionarProfessor.png"><br><p style="font-size:11px">Exemplo de preenchimento do formul&aacute;rio de cria&ccedil;&atilde;o de um professor.</p>
            </div>
                            
                            <a name="d0e454"></a>
                                
            <h4 style="color:#2ecc71">Alterar um Aluno/Professor</h4>
                                
            <p>A funcionalidade de alterar um aluno ou professor &eacute; tamb&eacute;m ela processada a partir de um formul&aacute;rio <em>HTML</em>, semelhante ao respetivo para adicionar, mas j&aacute; inicialmente preenchido com as informa&ccedil;&otilde;es pr&eacute;-altera&ccedil;&atilde;o do aluno ou professor
               escolhido. Assumimos que o id de um aluno n&atilde;o pode ser alterado pois isso n&atilde;o faria grande sentido.
            </p>
                                
            <p>Ap&oacute;s feitas as altera&ccedil;&otilde;es no formul&aacute;rio e submetido o mesmo &eacute; chamada a <em>script</em> de atendimento em <em>PHP</em> utilizando <em>SimpleXML</em> que altera o nodo respetivo do <em>XML</em> com as informa&ccedil;&otilde;es do formul&aacute;rio.
            </p>
                                
            <p> Segue-se a <em>script</em> utilizada para preencher o formul&aacute;rio com os dados do aluno escolhido (funciona igual para o professor).
            </p>
                                <pre style="background-color:#F5FFFA">
&lt;?php
                            
include('consultarAluno.html');

$id = $_REQUEST['idAluno'];

$logs = simplexml_load_file("alunos.xml");
  
$aluno = $logs-&gt;xpath("//aluno[@id='".$id."']");

echo "&lt;div class='newFormDiv'&gt;";
echo "&lt;form action='doAlterarAluno.php' class='newForm'&gt;";
echo "Id: &lt;input type='text' name='id' value='".(string)$aluno[0]['id']."'size='3' readonly&gt; &lt;br/&gt;";
echo "Nome: &lt;input type='text' name='nome' value='".(string)$aluno[0]-&gt;nome."'size='45'&gt; &lt;br/&gt;";
echo "Data de Nascimento: &lt;input type='text' name='data'value='".(string)$aluno[0]-&gt;dataNasc."' size='6'&gt; &lt;br/&gt;";
echo "Curso: &lt;select name='cursos' id='cursos'&gt;&lt;option selected='selected'&gt;".(string)$aluno[0]-&gt;curso."&lt;/option&gt;&lt;/select&gt;&lt;br/&gt;";
echo "Ano do Curso: &lt;input type='text' name='ano' value='".(string)$aluno[0]-&gt;anoCurso."'size='1'&gt;&lt;br/&gt;"; 
echo "Instrumento: &lt;select name='instrumentos' id='instrumentos'&gt;&lt;option selected='selected'&gt;".(string)$aluno[0]-&gt;instrumento."&lt;/option&gt;&lt;/select&gt;&lt;br/&gt;";
echo "&lt;center&gt;&lt;input type='submit' id='bigButton' value='Alterar'&gt; &lt;/center&gt;";
?&gt;
                    </pre>
                                <p>Para al&eacute;m desta <em>script</em> juntamos ainda a que trata de alterar os valores no <em>XML</em>:
            </p>
                                <pre style="background-color:#F5FFFA">
&lt;?php
                            
$oldId = $_REQUEST['id'];

$logs = simplexml_load_file("alunos.xml");
  
$alunos= $logs-&gt;xpath("//aluno[@id='".$oldId."']");
	
	foreach ($alunos as $aluno) {
		$aluno-&gt;nome = $_REQUEST['nome'];
		$aluno-&gt;dataNasc = $_REQUEST['data'];
		$aluno-&gt;curso= $_REQUEST['cursos'];
		$aluno-&gt;anoCurso = $_REQUEST['ano'];
		$aluno-&gt;instrumento = $_REQUEST['instrumentos'];
	}
	
header("Location:alunos.html");
$logs-&gt;asXML('alunos.xml');
?&gt;
                    </pre>
                                <p>Segue-se um exemplo ilustrativo do formul&aacute;rio de altera&ccedil;&atilde;o de um aluno.</p>
                                
            <div class="col-center text-center"><a name="d0e504"></a><img src="alterarProfessor.png"><br><p style="font-size:11px">Exemplo da altera&ccedil;&atilde;o de um aluno.</p>
            </div>
                            
                            <a name="d0e508"></a>
                                
            <h4 style="color:#2ecc71">Remover um Aluno/Professor/Audi&ccedil;&atilde;o</h4>
                                
            <p>Para remover um aluno,professor ou audi&ccedil;&atilde;o do sistema recorremos novamente ao <em>DOM</em> numa <em>script PHP</em> que recebe como argumento o id do aluno ou professor a remover e facilmente o remove do documento <em>XML</em> correspondente.
            </p>
                                
            <p>Segue-se a <em>script</em> de remo&ccedil;&atilde;o de um aluno, sendo que a de um professor e de uma audi&ccedil;&atilde;o &eacute; semelhante.
            </p>
                                <pre style="background-color:#F5FFFA">
&lt;?php 
                            
$logs = new DOMDocument(); 
$logs-&gt;load('alunos.xml');

$alunos = $logs-&gt;getElementsByTagName('aluno');

foreach ($alunos as $aluno) {
	$id = $aluno-&gt;getAttribute("id");
	if($id == $_REQUEST['idAluno']){
    	$aluno-&gt;parentNode-&gt;removeChild($aluno);}
	}
	
$logs-&gt;save("alunos.xml");
header("Location:alunos.html");
?&gt;
                    </pre>
                            
                            <a name="d0e535"></a>
                                
            <h4 style="color:#2ecc71">Listar Audi&ccedil;&otilde;es</h4>
                                
            <p>A listagem de audi&ccedil;&otilde;es &eacute; feita de forma semelhante &agrave; listagem de alunos e professores mas com uma ligeira diferen&ccedil;a: existe
               a op&ccedil;&atilde;o de filtrar as audi&ccedil;&otilde;es distinguindo as que ainda v&atilde;o decorrer das que j&aacute; decorreram.
            </p>
                                
            <p>Para al&eacute;m disso para cada audi&ccedil;&atilde;o existem dois bot&otilde;es adicionais relativos &agrave;s funcionalidades de gerar um <em>PDF</em> e uma p&aacute;gina <em>HTML</em> para publicitar audi&ccedil;&atilde;o. Isto foi conseguido com o aux&iacute;lio de uma biblioteca <em>Javascript</em>, <em>moment.js</em> que oferece funcionalidades para lidar com datas.
            </p>
                                
            <p>Seguem-se imagens ilustrativas da listagem de audi&ccedil;&otilde;es aplicando os filtros.</p>
                                
            <div class="col-center text-center"><a name="d0e561"></a><img src="audicoes.png"><br><p style="font-size:11px">Listagem de todas as audi&ccedil;&otilde;es</p>
            </div>
                                
            <div class="col-center text-center"><a name="d0e564"></a><img src="audicoesPass.png"><br><p style="font-size:11px">Listagem das audi&ccedil;&otilde;es que j&aacute; decorreram</p>
            </div>
                                
            <div class="col-center text-center"><a name="d0e567"></a><img src="audicoesFut.png"><br><p style="font-size:11px">Listagem das audi&ccedil;&otilde;es que ainda v&atilde;o decorrer</p>
            </div>
                            
                            <a name="d0e571"></a>
                                
            <h4 style="color:#2ecc71">Adicionar uma Audi&ccedil;&atilde;o</h4>
                                
            <p>Uma das funcionalidades que a plataforma deve oferecer &eacute; o planeamento/adi&ccedil;&atilde;o de uma audi&ccedil;&atilde;o &agrave; base de dados da escola.</p>
                                
            <p>Este planeamento ser&aacute; feito atrav&eacute;s de um simples ficheiro de texto em que o utilizador poder&aacute; introduzir os dados da audi&ccedil;&atilde;o
               de acordo com algumas regras especificadas por uma gram&aacute;tica desenvolvida por n&oacute;s.
            </p>
                                <pre style="background-color:#F5FFFA">

grammar plano;

@members{
    DataInterface dataInterface = new DataInterface();
    Audicao audition  = new Audicao();
}


audicao: 'Audi&ccedil;&atilde;o'  nome           {audition.setNome($nome.text);}
         'Local:'   local          {audition.setLocal($local.text);}
         'Data:'    data           {audition.setData($data.day, $data.month, $data.year);}
         'In&iacute;cio:'  hora           {audition.setInicio($hora.hours, $hora.minutes);}
         'Dura&ccedil;&atilde;o:' hora           {audition.setDuracao($hora.hours, $hora.minutes);}
         plano
                                   {dataInterface.addAudicao(audition);}
       ;

plano:       a1=atuacao            {audition.addAtuacao($a1.a);}
        (';' a2=atuacao            {audition.addAtuacao($a2.a);})*
     ;

atuacao returns [Atuacao a]:
    nome                           {$a = new Atuacao(dataInterface, $nome.text);}
    'Alunos:' aluno[$a]*
    'Professores:' professor[$a]*
    'Pe&ccedil;as:' peca[$a]*
    'Dura&ccedil;&atilde;o:' hora                {$a.setDuracao($hora.hours, $hora.minutes);}
    ;



aluno [Atuacao a]:
    IDA                            { a.addAluno($IDA.text); }
    ;


professor [Atuacao a]:
    IDP                            { a.addProfessor($IDP.text); }
    ;

peca [Atuacao a]:
    IDO                            { a.addPeca($IDO.text); }
    ;

nome:   STRING;
local:  STRING;


data returns [int day, int month, int year]:
    d=INT '-' m=INT '-' y=INT      { $day = $d.int;
                                     $month = $m.int;
                                     $year = $y.int;}
    ;


hora returns [int hours, int minutes]:
    h=INT ':' m=INT              { $hours = $h.int;
                                   $minutes = $m.int;}
    ;
                    </pre>
                                <p>Essa gram&aacute;tica foi totalmente desenvolvida utilizando <em>ANTLR</em> e mais tarde completada com atributos e recorrendo a funcionalidades do <em>Java</em> para as a&ccedil;&otilde;es sem&acirc;nticas.
            </p>
                                
            <p>Para al&eacute;m de validar o formato do ficheiro de planeamento de uma audi&ccedil;&atilde;o fornecido pelo utilizador esta gram&aacute;tica ter&aacute; a fun&ccedil;&atilde;o
               de verificar se a informa&ccedil;&atilde;o inserida est&aacute; de acordo com a base de dados (alunos existem, professor exite, obras existem...)
               e, caso tudo esteja correto, adicionar a informa&ccedil;&atilde;o sobre a audi&ccedil;&atilde;o &agrave; base de dados da escola.
            </p>
                                
            <p>Sendo a nossa base de dados um conjunto de ficheiros <em>XML</em> tivemos de recorrer a algumas bibliotecas do <em>Java</em> com fun&ccedil;&otilde;es especif&iacute;cas para podermos consultar e manipular os seus dados.
            </p>
                                
            <p>Executando esta gram&aacute;tica, se n&atilde;o ocorrerem erros,  &eacute; gerado c&oacute;digo <em>XML</em> relativo &agrave; audi&ccedil;&atilde;o presente no ficheiro de <em>input</em>. Este c&oacute;digo &eacute; adicionado no final do ficheiro de audi&ccedil;&otilde;es j&aacute; existente na base de dados. 
            </p>
                                
            <p>Os erros que s&atilde;o verificados s&atilde;o a exist&ecirc;ncia dos alunos, professores e obras na nossa base de dados do sistema, ou seja,
               verifica a sua exist&ecirc;ncia sempre nos ficheiros pr&eacute;-definidos da base de dados.
            </p>
                                
            <p>Quando ocorre um erro este causa uma excep&ccedil;&atilde;o que &eacute; imprimida tanto para o <em>standard input</em> como para um ficheiro de <em>logs</em> e a audi&ccedil;&atilde;o n&atilde;o &eacute; adicionada.
            </p>
                            
                            <a name="d0e628"></a>
                                
            <h4 style="color:#2ecc71">Gerar PDF para uma Audi&ccedil;&atilde;o</h4>
                                
            <p>Outra das funcionalidades que o nosso sistema oferece &eacute; a possibilidade de gerar um documento <em>PDF</em> para uma audi&ccedil;&atilde;o.
            </p>
                                
            <p>Para isto foi necess&aacute;rio criar um <em>XSL</em> que gerasse um ficheiro <em>FO (Formatting objects)</em> que por sua vez gera um documento <em>PDF</em> para um determinado documento <em>XML</em>.
            </p>
                            
                            <a name="d0e658"></a>
                                
            <h4 style="color:#2ecc71">Gerar p&aacute;gina HTML para uma Audi&ccedil;&atilde;o</h4>
                                
            <p>Para al&eacute;m do <em>PDF</em> &eacute; ainda poss&iacute;vel gerar uma p&aacute;gina <em>HTML</em> para publicitar uma audi&ccedil;&atilde;o.
            </p>
                                
            <p>Isto &eacute; feito atrav&eacute;s de um <em>XSL</em> simples que transforma um <em>XML</em> num <em>HTML</em>.
            </p>
                                
            <p>De seguida apresentamos o <em>XML</em> de uma audi&ccedil;&atilde;o e o resultado.
            </p>
                                <pre style="background-color:#F5FFFA">
&lt;audicao id="A1"&gt;
   &lt;nome&gt;R&eacute;cita 1&ordm; Dezembro&lt;/nome&gt;
   &lt;data&gt;2040-12-01&lt;/data&gt;
   &lt;local&gt;Theatro Circo&lt;/local&gt;
   &lt;inicio&gt;22:30&lt;/inicio&gt;
   &lt;duracao&gt;150 min&lt;/duracao&gt;
   &lt;atuacoes&gt;
       &lt;atuacao&gt;
            &lt;nome&gt;Ritmo Fluente&lt;/nome&gt;
            &lt;duracao&gt;40 min&lt;/duracao&gt;
            &lt;alunos&gt;
               &lt;aluno&gt;A1510&lt;/aluno&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O134&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
       &lt;atuacao&gt;
           &lt;nome&gt;V&aacute;rios Ritmos&lt;/nome&gt;
           &lt;duracao&gt;50 min&lt;/duracao&gt;
           &lt;alunos&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
               &lt;aluno&gt;A38165&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O1&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
       &lt;atuacao&gt;
           &lt;nome&gt;Raps&oacute;dia&lt;/nome&gt;
           &lt;duracao&gt;50 min&lt;/duracao&gt;
           &lt;alunos&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
               &lt;aluno&gt;A38165&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O1&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
   &lt;/atuacoes&gt;
&lt;/audicao&gt;
                    </pre>
                                <div class="col-center text-center"><a name="d0e696"></a><img src="audicaoHTML.png"><br><p style="font-size:11px">HTML gerado para a audi&ccedil;&atilde;o</p>
            </div>
                            
                        
                    <a name="d0e703"></a>
                        
            <h2 style="color:#c0392b">Conclus&otilde;es</h2>
                        <a name="d0e708"></a>
                            
            <h3 style="color:#e74c3c">Reflex&atilde;o Crit&iacute;ca</h3>
                            
            <p>Este trabalho permitiu-nos consolidar e dar uma aplica&ccedil;&atilde;o mais pr&aacute;tica aos conceitos leccionados durante todo o semestre nas
               Unidades Curriculares de <strong>GCS</strong> e <strong>PRI</strong>.
            </p>
                            
            <p>Revelou-se um projeto bastante interessante e &uacute;til na medida em que atrav&eacute;s da sua realiza&ccedil;&atilde;o foi poss&iacute;vel melhorarmos (e
               at&eacute; aprendermos!) muito os nossos conhecimentos em termos de aplica&ccedil;&otilde;es <em>Web</em>.
            </p>
                            
            <p>&Eacute; sempre positivo poder praticar o uso de novas tecnologias, como foi o caso do <em>PHP</em> que nunca haviamos utilizado ou mesmo o <em>javascript</em>. 
            </p>
                            
            <p>Em termos de gram&aacute;ticas foi tamb&eacute;m interessante perceber que podem ser bastante utiliz&aacute;veis e &uacute;teis em casos reais.</p>
                            
            <p>O maior obst&aacute;culo que encontramos na realiza&ccedil;&atilde;o deste trabalho foi o facto de o <em>PHP</em> n&atilde;o suportar o <em>XSL 2.0</em>, o que fez com que tivessemos que encontrar alternativas para o <em>xsl:result-document</em> de forma a poder gerar documentos atrav&eacute;s do <em>XSL</em>.
            </p>
                        
                        <a name="d0e756"></a>
                            
            <h3 style="color:#e74c3c">Trabalho Futuro</h3>
                            
            <p>Como trabalho futuro fica , antes de mais, tornar a plataforma mais apelativa e atual visualmente. </p>
                            
            <p>Gostariamos ainda de alarg&aacute;-la de forma a lidar com mais informa&ccedil;&atilde;o (cursos, obras, compositores, grupos de alunos) e criar
               funcionalidades de registo de v&aacute;rios tipos de utilizador (alunos, professores, gerentes das escolas) de forma a que se tornasse
               uma plataforma completa para uma escola de m&uacute;sica em que se pudessem,por exemplo, marcar aulas e gerir hor&aacute;rios
            </p>
                        
                    
         </div>
         <hr>
         <hr>
      </div>
   </body>
</html>