<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"><script src="https://code.jquery.com/jquery-1.11.0.min.js"></script><style type="text/css">
                    .col-center{
                        float:none;
                        margin-left:auto;
                        margin-right:auto;
                    }</style><title>Relatório</title>
   </head>
   <body>
      <div class="container">
         <div class="col-md-12 text-center">
            <div class="row">
               <div class="col-md-12">
                  <h2 style="color:#c0392b">Processamento de Linguagens e Conhecimento</h2>
                  <h3 style="color:#e74c3c">Um Gestor de Audições/Concertos Musicais</h3>
               </div>
            </div>
            <div class="row">
               <div class="col-md-6 col-center">
                  <div class="col-md-4">
                     <div class="row"><strong>Patrícia Barros</strong></div>
                     <div class="row">a67665</div>
                     <div class="row"><a href="mailto:a67665@alunos.uminho.pt">a67665@alunos.uminho.pt</a></div>
                     <div class="row"><img style="width: 100px" src="7.jpg"></div>
                  </div>
                  <div class="col-md-4">
                     <div class="row"><strong>Xavier Francisco</strong></div>
                     <div class="row">a67725</div>
                     <div class="row"><a href="mailto:a67725@alunos.uminho.pt">a67725@alunos.uminho.pt</a></div>
                     <div class="row"><img style="width: 100px" src="4.jpg"></div>
                  </div>
               </div>
            </div>
            <div class="row" style="margin-top:30px">
               <div class="col-md-12">
                  <div class="row">
                     <h4>2016-01-18</h4>
                  </div>
                  <div class="row">
                     <h4>Universidade do Minho</h4>
                  </div>
               </div>
            </div>
         </div>
         
         <p>Este relatório descreve todo o processo de desenvolvimento e decisões tomadas para
            a realização do trabalho final do perfil de Processamento de Linguagens e Compiladores.
         </p>
         
         <p>O problema a resolver consiste na criação de um sistema que permita a gestão de audições
            musicais de uma escola de música.
         </p>
         
         <div class="col-md-12">
            <div class="row">
               <p class="bg-info">Indíce:</p>
               <ul>
                  <li><a style="color:#2ecc71" href="#d1e67">Estrutura do Relatório</a></li>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d1e85">Introdução</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e90">Contextualização</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e99">Objetivos</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e108">Motivação</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e117">Ferramentas</a></li>
                  </ul>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d1e206">Desenvolvimento</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e211">Arquitetura do Sistema</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e245">Armazenamento de Dados</a></li>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e265">Modelos</a></li>
                     </ul>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e371">Funcionalidades</a></li>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e379">Listar Alunos/Professores</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e416">Adicionar um Aluno/Professor</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e462">Alterar um Aluno/Professor</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e518">Remover um Aluno/Professor/Audição</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e545">Listar Audições</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e582">Adicionar uma Audição</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e696">Gerar PDF para uma Audição</a></li>
                     </ul>
                     <ul>
                        <li><a style="color:#3498db" href="#d1e726">Gerar página HTML para uma Audição</a></li>
                     </ul>
                  </ul>
               </ul>
               <ul>
                  <li><a style="color:#2ecc71" href="#d1e772">Conclusões</a></li>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e777">Reflexão Critíca</a></li>
                  </ul>
                  <ul>
                     <li><a style="color:#1abc9c" href="#d1e826">Trabalho Futuro</a></li>
                  </ul>
               </ul>
            </div>
         </div>
         <div class="col-md-12">
            <div class="row">
               <p class="bg-success">Indíce de Figuras:</p>
               <ul>
                  <li><a style="color:#3498db" href="#d1e219">Desenho da arquitetura do Sistema</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e296">Schema representativo da estrutura do ficheiro XML que suporta a informação dos alunos.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e327">Schema representativo da estrutura do ficheiro XML que suporta a informação dos professores.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e361">Schema representativo da estrutura do ficheiro XML que suporta a informação das audições.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e402">Exemplo da listagem de professores.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e455">Exemplo de preenchimento do formulário de criação de um aluno.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e458">Exemplo de preenchimento do formulário de criação de um professor.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e513">Exemplo da alteração de um aluno.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e571">Listagem de todas as audições</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e575">Listagem das audições que já decorreram</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e578">Listagem das audições que ainda vão decorrer</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e664">Exemplo de um ficheiro de entrada para a criação de uma audição inserido na interface
                        da aplicação Web.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e676">Exemplo de um audição inserida com sucesso na interface da aplicação Web.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e685">Exemplo de um audição não valida na interface da aplicação Web.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e692">Diálogo de erros de uma audição não valida.</a></li>
               </ul>
               <ul>
                  <li><a style="color:#3498db" href="#d1e765">HTML gerado para a audição</a></li>
               </ul>
            </div>
         </div>
         <hr>
         <div class="col-md-12"><a name="d1e67"></a>
            
            <h2 style="color:#c0392b">Estrutura do Relatório</h2>
            
            <p>Este relatório está organizado em capítulos e secções. No capítulo 1 podemos encontrar
               um apanhado de informações sobre o projeto, nomeadamente sobre o contexto, motivação,
               objetivos e resultados do mesmo.
            </p>
            
            <p>O capítulo 2  expõe o enunciado do trabalho.</p>
            
            <p>De seguida, o capítulo 3 engloba todas as secções relativas ao desenvolvimento do
               projeto: todas as decisões tomadas e uma descrição de tudo o que foi feito.
            </p>
            
            <p>Por último, o capítulo 4 contém algumas conclusões sobre o trabalho realizado, nomeadamente
               o estado do mesmo, o trabalho futuro e um comentário de opinião pessoal.
            </p>
            <a name="d1e85"></a>
            
            <h2 style="color:#c0392b">Introdução</h2>
            <a name="d1e90"></a>
            
            <h3 style="color:#e74c3c">Contextualização</h3>
            
            <p>Este trabalho foi realizado no âmbito das Unidades Curriculares de Gramáticas na Compreensão
               de Software e Processamento e Representação de Informação, dizendo respeito às matérias
               leccionadas em ambas: gramáticas independentes de contexto, gramáticas de atributos,
               DTD's, XPath, XSLT, XML Schema e formulários HTML.
            </p>
            
            <a name="d1e99"></a>
            
            <h3 style="color:#e74c3c">Objetivos</h3>
            
            <p>Este trabalho tem como objetivos consolidar todo o conhecimento adquirido ao longo
               do semestre nas duas Unidades Curriculares a que diz respeito mas também dar resposta
               a uma necessidade que existe atualmente no Mundo real, tornando ainda o projeto mais
               aliciante.
            </p>
            
            <a name="d1e108"></a>
            
            <h3 style="color:#e74c3c">Motivação</h3>
            
            <p>Atualmente praticamente nenhuma das aplicações existentes para gerir escolas tem a
               funcionalidade de gerir audições ou concertos pois esta é uma necessidade específica
               de uma escola de música que ao longo de um ano letivo poderá ter que organizar dezenas
               ou centenas de audições e concertos. Posto isto é importante começar a dar resposta
               às escolas de música nesse sentido.
            </p>
            
            <a name="d1e117"></a>
            
            <h3 style="color:#e74c3c">Ferramentas</h3>
            
            <p>Para o desenvolvimento deste projeto foram necessárias várias ferramentas de desenvolvimento
               que passamos a nomear.
            </p>
            
            <p>Para gerir o desenvolvimento de código em paralelo pelos dois membros da equipa utilizamos
               uma ferramenta de controlo de versões, o <em><strong>Github</strong></em>.
            </p>
            
            <p>Para o desenvolvimento propriamente dito do projeto utilizamos <em><strong>HTML</strong></em>, <em><strong>PHP</strong></em> e <em><strong>Javascript</strong></em>. Recorremos ainda ao <em><strong>CSS</strong></em> para melhorar o aspeto estético do sistema. Utilizámos ainda algomas funcionalidades
               do <em><strong>Bootstrap</strong></em>, nomeadamente para a formatação das tabelas de listagem e dos botões.
            </p>
            
            <p>Para lidar com os ficheiros de texto que guardam os dados do nosso sistema recorremos
               ao <em><strong>XML</strong></em> e utilizamos <em><strong>XSL</strong></em> para os transformar em ficheiros <em>javascript</em> e <em>html</em>. Utilizamos ainda <em><strong>XSL-FO</strong></em> para gerar um documento <em>PDF</em> a partir de um <em>XML</em></p>
            
            <p>Utilizamos ainda <em><strong>ANTLR</strong></em> para criar uma linguagem de suporte a uma parte do nosso sistema.
            </p>
            
            <p>Para facilitar o nosso trabalho recorremos a alguns <em>IDE's</em> como o <em><strong>Oxygen</strong></em> e o <em><strong>Intelij</strong></em>.
            </p>
            
            <a name="d1e206"></a>
            
            <h2 style="color:#c0392b">Desenvolvimento</h2>
            <a name="d1e211"></a>
            
            <h3 style="color:#e74c3c">Arquitetura do Sistema</h3>
            
            <p>Para começar a descrição do trabalho que realizamos segue-se um desenho da arquitetura
               do sistema para que seja facilmente perceptível qual a abordagem que utilizamos.
            </p>
            
            <div class="col-center text-center"><a name="d1e219"></a><img src="PLC.png"><br><p style="font-size:11px">Desenho da arquitetura do Sistema</p>
            </div>
            
            <p>Apesar de o sistema ser um gestor de audições decidimos também manipular informação
               sobre os alunos e professores da escola de música.
            </p>
            
            <p>O utilizador pode consultar toda a informação sobre essas três entidades, sendo que
               os dados são extraídos dos ficheiros <em>XML</em> pré-definidos (alunos.xml, professores.xml e audicoes.xml) através de um <em>XSL</em> que gera um <em>HTML</em>.
            </p>
            
            <p>Ao alterar/adicionar dados, estes são validados e posteriormente adicionados aos ficheiros
               <em>XML</em> correspondentes.
            </p>
            
            <a name="d1e245"></a>
            
            <h3 style="color:#e74c3c">Armazenamento de Dados</h3>
            
            <p>Decidimos utilizar ficheiros <em>XML</em> para guardar todos os dados relevantes da escola de música: alunos, professores,
               cursos, instrumentos, audições, obras e compositores. Para cada uma destas entidades
               existe um ficheiro <em>XML</em> que lhe oferece suporte.
            </p>
            
            <p>Passamos então a descrever a estrutura dos documentos <em>XML</em> utilizados para suportar toda a indormação do sistema.
            </p>
            <a name="d1e265"></a>
            
            <h4 style="color:#2ecc71">Modelos</h4>
            
            <p><strong>Aluno:</strong></p>
            
            
            <ul>código/identificador único;</ul>
            
            <ul>nome;</ul>
            
            <ul>data de nascimento;</ul>
            
            <ul>curso em que está matriculado;</ul>
            
            <ul>ano do curso que frequenta;</ul>
            
            <ul>instrumento que toca;</ul>
            
            
            <div class="col-center text-center"><a name="d1e296"></a><img src="dtdAlunos.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informação dos alunos.</p>
            </div>
            
            <p><strong>Professor:</strong></p>
            
            
            <ul>código/identificador único;</ul>
            
            <ul>nome;</ul>
            
            <ul>data de nascimento;</ul>
            
            <ul>abilitação académica (que nível de formação tem e em quê);</ul>
            
            <ul>curso que lecciona;</ul>
            
            
            <div class="col-center text-center"><a name="d1e327"></a><img src="dtdProfessores.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informação dos professores.</p>
            </div>
            
            <p><strong>Audição:</strong></p>
            
            
            <ul>nome/título;</ul>
            
            <ul>local;</ul>
            
            <ul>data;</ul>
            
            <ul>duração esperada;</ul>
            
            <ul>hora de inicio;</ul>
            
            <ul>atuaçoes: cada atuaçao tem um nome, duração e uma lista de alunos e professores;</ul>
            
            
            <div class="col-center text-center"><a name="d1e361"></a><img src="dtdAudicoes.png"><br><p style="font-size:11px">Schema representativo da estrutura do ficheiro XML que suporta a informação das audições.</p>
            </div>
            
            
            <a name="d1e371"></a>
            
            <h3 style="color:#e74c3c">Funcionalidades</h3>
            
            <p>Passamos agora a descrever detalhadamente como foi implementada cada uma das funcionalidades
               que o nosso sistema tem para oferecer e todas as decisões tomadas em relação a elas.
            </p>
            <a name="d1e379"></a>
            
            <h4 style="color:#2ecc71">Listar Alunos/Professores</h4>
            
            <p>Os alunos e professores são listados da mesma forma: a partir do ficheiro <em>XML</em> pré-definido (alunos.xml) é gerado um ficheiro .js através de um processador <em>XSLT</em> que contém algumas informações sobre os elementos (id, nome e instrumento/curso)
               guardadas em arrays. Na página em que é apresentada a listagem é carregado um outro
               .js que povoa a tabela de acordo com os arrays de informações disponíveis. São ainda
               adicionados para cada elemento três botões que dão acesso às funcionalidades de consultar,
               alterar e remover.
            </p>
            
            <p>A tabela em que são apresentados os resultados é paginada, ou seja, são apresentados
               no máximo 20 resultados por página e é possível navegar para outras páginas. Isto
               foi conseguido através de uma biblioteca <em>javascript</em> já existente chamada <em>pagination.js</em>.
            </p>
            
            <div class="col-center text-center"><a name="d1e402"></a><img src="listarAlunos.png"><br><p style="font-size:11px">Exemplo da listagem de professores.</p>
            </div>
            
            <p>Segue-se o ficheiro .js utilizado para povoar a tabela de alunos, sendo que a <em>script</em> para povoar a tabela dos professores é idêntica.
            </p>
            <pre style="background-color:#F5FFFA">
        var index=0;
        $(document).ready(function(){
        for(index=0;index &lt; nomes.length;index++){
            $("#alunos").append("&lt;tr&gt;&lt;td&gt;"+ids[index]+"&lt;/td&gt;
            &lt;td&gt;"+nomes[index]+"&lt;/td&gt;
            &lt;td&gt;"+instrumentos[index]+"&lt;/td&gt;
            &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'alterarAluno.php?idAluno="+ids[index]+"\'\" value=\"Alterar\"/&gt;&lt;/td&gt;
                &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'removerAluno.php?idAluno="+ids[index]+"\'\" value=\"Remover\"/&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;input type=\"button\" onclick=\"location.href=\'consultarAluno.php?idAluno="+ids[index]+"\'\" value=\"Consultar\"/&gt;&lt;/td&gt;
                    &lt;/tr&gt;");
                        }
                        });
                    </pre>
            
            <a name="d1e416"></a>
            
            <h4 style="color:#2ecc71">Adicionar um Aluno/Professor</h4>
            
            <p>O ato de adicionar um aluno ou professor ao sistema é feito através de um formulário
               <em>HTML</em> com uma <em>script</em> de atendimento em <em>PHP</em> que utilizando <em>DOM</em> adiciona um novo elemento ao ficheiro <em>XML</em> com as informações recebidas do formulário.
            </p>
            
            <p>De seguida mostra-se a <em>script PHP</em> utilizada para adicionar os elementos ao <em>XML</em>:
            </p>
            <pre style="background-color:#F5FFFA">
&lt;?php
$logs = new DOMDocument(); 
$logs-&gt;load('alunos.xml');
 
$log = $logs-&gt;createElement('aluno');
$id = $logs-&gt;createAttribute('id');
$id-&gt;value = $_GET['id'];
$nome = $logs-&gt;createElement('nome',$_GET['nome']);
$dataNasc = $logs-&gt;createElement('dataNasc',$_GET['dataNasc']);
$curso = $logs-&gt;createElement('curso',$_GET['curso']);
$anoCurso = $logs-&gt;createElement('anoCurso',$_GET['ano']);
$instrumento = $logs-&gt;createElement('instrumento',$_GET['instrumentos']);
 
$log-&gt;appendChild($id);
$log-&gt;appendChild($nome);
$log-&gt;appendChild($dataNasc);
$log-&gt;appendChild($curso);
$log-&gt;appendChild($anoCurso);
$log-&gt;appendChild($instrumento);
 
$logs-&gt;documentElement-&gt;appendChild($log);
 
$logs-&gt;save("alunos.xml");

header("Location:alunos.html");
                    </pre>
            <p>Seguem-se exemplos ilustrativos dos formulários de criação de um aluno e de um professor.</p>
            
            <div class="col-center text-center"><a name="d1e455"></a><img src="adicionarAluno.png"><br><p style="font-size:11px">Exemplo de preenchimento do formulário de criação de um aluno.</p>
            </div>
            
            <div class="col-center text-center"><a name="d1e458"></a><img src="adicionarProfessor.png"><br><p style="font-size:11px">Exemplo de preenchimento do formulário de criação de um professor.</p>
            </div>
            
            <a name="d1e462"></a>
            
            <h4 style="color:#2ecc71">Alterar um Aluno/Professor</h4>
            
            <p>A funcionalidade de alterar um aluno ou professor é também ela processada a partir
               de um formulário <em>HTML</em>, semelhante ao respetivo para adicionar, mas já inicialmente preenchido com as informações
               pré-alteração do aluno ou professor escolhido. Assumimos que o id de um aluno não
               pode ser alterado pois isso não faria grande sentido.
            </p>
            
            <p>Após feitas as alterações no formulário e submetido o mesmo é chamada a <em>script</em> de atendimento em <em>PHP</em> utilizando <em>SimpleXML</em> que altera o nodo respetivo do <em>XML</em> com as informações do formulário.
            </p>
            
            <p> Segue-se a <em>script</em> utilizada para preencher o formulário com os dados do aluno escolhido (funciona igual
               para o professor).
            </p>
            <pre style="background-color:#F5FFFA">
&lt;?php
                            
include('consultarAluno.html');

$id = $_REQUEST['idAluno'];

$logs = simplexml_load_file("alunos.xml");
  
$aluno = $logs-&gt;xpath("//aluno[@id='".$id."']");

echo "&lt;div class='newFormDiv'&gt;";
echo "&lt;form action='doAlterarAluno.php' class='newForm'&gt;";
echo "Id: &lt;input type='text' name='id' value='".(string)$aluno[0]['id']."'size='3' readonly&gt; &lt;br/&gt;";
echo "Nome: &lt;input type='text' name='nome' value='".(string)$aluno[0]-&gt;nome."'size='45'&gt; &lt;br/&gt;";
echo "Data de Nascimento: &lt;input type='text' name='data'value='".(string)$aluno[0]-&gt;dataNasc."' size='6'&gt; &lt;br/&gt;";
echo "Curso: &lt;select name='cursos' id='cursos'&gt;&lt;option selected='selected'&gt;".(string)$aluno[0]-&gt;curso."&lt;/option&gt;&lt;/select&gt;&lt;br/&gt;";
echo "Ano do Curso: &lt;input type='text' name='ano' value='".(string)$aluno[0]-&gt;anoCurso."'size='1'&gt;&lt;br/&gt;"; 
echo "Instrumento: &lt;select name='instrumentos' id='instrumentos'&gt;&lt;option selected='selected'&gt;".(string)$aluno[0]-&gt;instrumento."&lt;/option&gt;&lt;/select&gt;&lt;br/&gt;";
echo "&lt;center&gt;&lt;input type='submit' id='bigButton' value='Alterar'&gt; &lt;/center&gt;";
?&gt;
                    </pre>
            <p>Para além desta <em>script</em> juntamos ainda a que trata de alterar os valores no <em>XML</em>:
            </p>
            <pre style="background-color:#F5FFFA">
&lt;?php
                            
$oldId = $_REQUEST['id'];

$logs = simplexml_load_file("alunos.xml");
  
$alunos= $logs-&gt;xpath("//aluno[@id='".$oldId."']");
	
	foreach ($alunos as $aluno) {
		$aluno-&gt;nome = $_REQUEST['nome'];
		$aluno-&gt;dataNasc = $_REQUEST['data'];
		$aluno-&gt;curso= $_REQUEST['cursos'];
		$aluno-&gt;anoCurso = $_REQUEST['ano'];
		$aluno-&gt;instrumento = $_REQUEST['instrumentos'];
	}
	
header("Location:alunos.html");
$logs-&gt;asXML('alunos.xml');
?&gt;
                    </pre>
            <p>Segue-se um exemplo ilustrativo do formulário de alteração de um aluno.</p>
            
            <div class="col-center text-center"><a name="d1e513"></a><img src="alterarProfessor.png"><br><p style="font-size:11px">Exemplo da alteração de um aluno.</p>
            </div>
            
            <a name="d1e518"></a>
            
            <h4 style="color:#2ecc71">Remover um Aluno/Professor/Audição</h4>
            
            <p>Para remover um aluno,professor ou audição do sistema recorremos novamente ao <em>DOM</em> numa <em>script PHP</em> que recebe como argumento o id do aluno ou professor a remover e facilmente o remove
               do documento <em>XML</em> correspondente.
            </p>
            
            <p>Segue-se a <em>script</em> de remoção de um aluno, sendo que a de um professor e de uma audição é semelhante.
            </p>
            <pre style="background-color:#F5FFFA">
&lt;?php 
                            
$logs = new DOMDocument(); 
$logs-&gt;load('alunos.xml');

$alunos = $logs-&gt;getElementsByTagName('aluno');

foreach ($alunos as $aluno) {
	$id = $aluno-&gt;getAttribute("id");
	if($id == $_REQUEST['idAluno']){
    	$aluno-&gt;parentNode-&gt;removeChild($aluno);}
	}
	
$logs-&gt;save("alunos.xml");
header("Location:alunos.html");
?&gt;
                    </pre>
            
            <a name="d1e545"></a>
            
            <h4 style="color:#2ecc71">Listar Audições</h4>
            
            <p>A listagem de audições é feita de forma semelhante à listagem de alunos e professores
               mas com uma ligeira diferença: existe a opção de filtrar as audições distinguindo
               as que ainda vão decorrer das que já decorreram.
            </p>
            
            <p>Para além disso para cada audição existem dois botões adicionais relativos às funcionalidades
               de gerar um <em>PDF</em> e uma página <em>HTML</em> para publicitar audição. Isto foi conseguido com o auxílio de uma biblioteca <em>Javascript</em>, <em>moment.js</em> que oferece funcionalidades para lidar com datas.
            </p>
            
            <p>Seguem-se imagens ilustrativas da listagem de audições aplicando os filtros.</p>
            
            <div class="col-center text-center"><a name="d1e571"></a><img src="audicoes.png"><br><p style="font-size:11px">Listagem de todas as audições</p>
            </div>
            
            <div class="col-center text-center"><a name="d1e575"></a><img src="audicoesPass.png"><br><p style="font-size:11px">Listagem das audições que já decorreram</p>
            </div>
            
            <div class="col-center text-center"><a name="d1e578"></a><img src="audicoesFut.png"><br><p style="font-size:11px">Listagem das audições que ainda vão decorrer</p>
            </div>
            
            <a name="d1e582"></a>
            
            <h4 style="color:#2ecc71">Adicionar uma Audição</h4>
            
            <p>Uma das funcionalidades que a plataforma deve oferecer é o planeamento/adição de uma
               audição ao armazenamento de dados da escola.
            </p>
            
            <p>Este planeamento será feito através de um simples ficheiro de texto em que o utilizador
               poderá introduzir os dados da audição de acordo com algumas regras especificadas por
               uma gramática desenvolvida por nós.
            </p>
            <pre style="background-color:#F5FFFA">

grammar plano;

@members{
    DataInterface dataInterface = new DataInterface();
    Audicao audition  = new Audicao();
}


audicao: 'Audição'  nome           {audition.setNome($nome.text);}
         'Local:'   local          {audition.setLocal($local.text);}
         'Data:'    data           {audition.setData($data.day, $data.month, $data.year);}
         'Início:'  hora           {audition.setInicio($hora.hours, $hora.minutes);}
         'Duração:' hora           {audition.setDuracao($hora.hours, $hora.minutes);}
         plano
                                   {dataInterface.addAudicao(audition);}
       ;

plano:       a1=atuacao            {audition.addAtuacao($a1.a);}
        (';' a2=atuacao            {audition.addAtuacao($a2.a);})*
     ;

atuacao returns [Atuacao a]:
    nome                           {$a = new Atuacao(dataInterface, $nome.text);}
    'Alunos:' aluno[$a]*
    'Professores:' professor[$a]*
    'Peças:' peca[$a]*
    'Duração:' hora                {$a.setDuracao($hora.hours, $hora.minutes);}
    ;



aluno [Atuacao a]:
    IDA                            { a.addAluno($IDA.text); }
    ;


professor [Atuacao a]:
    IDP                            { a.addProfessor($IDP.text); }
    ;

peca [Atuacao a]:
    IDO                            { a.addPeca($IDO.text); }
    ;

nome:   STRING;
local:  STRING;


data returns [int day, int month, int year]:
    d=INT '-' m=INT '-' y=INT      { $day = $d.int;
                                     $month = $m.int;
                                     $year = $y.int;}
    ;


hora returns [int hours, int minutes]:
    h=INT ':' m=INT              { $hours = $h.int;
                                   $minutes = $m.int;}
    ;
                    </pre>
            <p>Essa gramática foi totalmente desenvolvida utilizando <em>ANTLR</em> e mais tarde completada com atributos e recorrendo a funcionalidades do <em>Java</em> para as ações semânticas.
            </p>
            
            <p>Para além de validar o formato do ficheiro de planeamento de uma audição fornecido
               pelo utilizador esta gramática terá a função de verificar se a informação inserida
               está de acordo com o armazenamento de dados (alunos existem, professor existe e obras
               existem) e, caso tudo esteja correto, adicionar a informação sobre a audição ao repositório
               de dados da escola.
            </p>
            
            <p>Sendo o nosso armazenamento de dados um conjunto de ficheiros <em>XML</em> tivemos de recorrer a algumas bibliotecas do <em>Java</em> com funções especifícas para podermos consultar e manipular os seus dados.
            </p>
            
            <p>Executando esta gramática, se não ocorrerem erros,  é gerado código <em>XML</em> relativo à audição presente no ficheiro de <em>input</em>. Este código é adicionado no final do ficheiro de audições já existente no repositório
               de dados. 
            </p>
            
            <p>Os erros que são verificados são a existência dos alunos, professores e obras no nosso
               repositório de dados do sistema, ou seja, verifica a sua existência sempre nos ficheiros
               pré-definidos do repositório de dados.
            </p>
            
            <p>Quando ocorre um erro este causa uma excepção que é imprimida tanto para o <em>standard input</em> como para um ficheiro de <em>logs</em> e a audição não é adicionada.
            </p>
            
            <p>Na aplicação <em>Web</em> quando é pressionado o botão para adicionar uma nova audição é apresentada uma caixa
               de texto em que podemos digitar o ficheiro de entrada para a criação da audição. Após
               ter escrito o texto de entrada e clicado no botão "Adicionar" o ficheiro de texto
               é enviado por <em>POST Request</em> para o servidor, onde é processado por uma script <em>PHP</em> que por sua vez chama, com o commando <em>exec</em>, o <em>ANTLR</em> que, por fim, analisa o input que lhe foi passado.
            </p>
            
            <p>Para além disso é também dada a opção de importar um ficheiro de texto já existente
               e executar o <em>ANTLR</em> para o ficheiro escolhido.
            </p>
            
            <div class="col-center text-center"><a name="d1e664"></a><img src="adicionaraudicao.PNG"><br><p style="font-size:11px">Exemplo de um ficheiro de entrada para a criação de uma audição inserido na interface
                  da aplicação Web.
               </p>
            </div>
            
            
            <p>Se não ocorrerem erros no processamento do ficheiro pelo <em>ANTLR</em> somos reencaminhados de novo para a listagem de audições, agora com uma linha adicional
               na tabela, como podemos ver:
            </p>
            
            
            <div class="col-center text-center"><a name="d1e676"></a><img src="newAudi.jpg"><br><p style="font-size:11px">Exemplo de um audição inserida com sucesso na interface da aplicação Web.</p>
            </div>
            
            
            <p>Se ocorrerem erros é mostrada uma caixa de diálogo que informa ao utilizador os erros
               que a validação semântica descobriu, como podemos ver nas seguintes imagens: 
            </p>
            
            
            <div class="col-center text-center"><a name="d1e685"></a><img src="wrongAuditionInput.png"><br><p style="font-size:11px">Exemplo de um audição não valida na interface da aplicação Web.</p>
            </div>
            
            
            <div class="col-center text-center"><a name="d1e692"></a><img src="wrongAuditionOutput.png"><br><p style="font-size:11px">Diálogo de erros de uma audição não valida.</p>
            </div>
            
            
            
            <a name="d1e696"></a>
            
            <h4 style="color:#2ecc71">Gerar PDF para uma Audição</h4>
            
            <p>Outra das funcionalidades que o nosso sistema oferece é a possibilidade de gerar um
               documento <em>PDF</em> para uma audição.
            </p>
            
            <p>Para isto foi necessário criar um <em>XSL</em> que gerasse um ficheiro <em>FO (Formatting objects)</em> que por sua vez gera um documento <em>PDF</em> para um determinado documento <em>XML</em>.
            </p>
            
            <a name="d1e726"></a>
            
            <h4 style="color:#2ecc71">Gerar página HTML para uma Audição</h4>
            
            <p>Para além do <em>PDF</em> é ainda possível gerar uma página <em>HTML</em> para publicitar uma audição.
            </p>
            
            <p>Isto é feito através de um <em>XSL</em> simples que transforma um <em>XML</em> num <em>HTML</em>.
            </p>
            
            <p>De seguida apresentamos o <em>XML</em> de uma audição e o resultado.
            </p>
            <pre style="background-color:#F5FFFA">
&lt;audicao id="A1"&gt;
   &lt;nome&gt;Récita 1º Dezembro&lt;/nome&gt;
   &lt;data&gt;2040-12-01&lt;/data&gt;
   &lt;local&gt;Theatro Circo&lt;/local&gt;
   &lt;inicio&gt;22:30&lt;/inicio&gt;
   &lt;duracao&gt;150 min&lt;/duracao&gt;
   &lt;atuacoes&gt;
       &lt;atuacao&gt;
            &lt;nome&gt;Ritmo Fluente&lt;/nome&gt;
            &lt;duracao&gt;40 min&lt;/duracao&gt;
            &lt;alunos&gt;
               &lt;aluno&gt;A1510&lt;/aluno&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O134&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
       &lt;atuacao&gt;
           &lt;nome&gt;Vários Ritmos&lt;/nome&gt;
           &lt;duracao&gt;50 min&lt;/duracao&gt;
           &lt;alunos&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
               &lt;aluno&gt;A38165&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O1&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
       &lt;atuacao&gt;
           &lt;nome&gt;Rapsódia&lt;/nome&gt;
           &lt;duracao&gt;50 min&lt;/duracao&gt;
           &lt;alunos&gt;
               &lt;aluno&gt;A32597&lt;/aluno&gt;
               &lt;aluno&gt;A38165&lt;/aluno&gt;
           &lt;/alunos&gt;
           &lt;professores&gt;
               &lt;professor&gt;P1&lt;/professor&gt;
               &lt;professor&gt;P2&lt;/professor&gt;
           &lt;/professores&gt;
           &lt;obras&gt;
               &lt;obra&gt;O1&lt;/obra&gt;
           &lt;/obras&gt;
       &lt;/atuacao&gt;
   &lt;/atuacoes&gt;
&lt;/audicao&gt;
                    </pre>
            <div class="col-center text-center"><a name="d1e765"></a><img src="audicaoHTML.png"><br><p style="font-size:11px">HTML gerado para a audição</p>
            </div>
            
            
            <a name="d1e772"></a>
            
            <h2 style="color:#c0392b">Conclusões</h2>
            <a name="d1e777"></a>
            
            <h3 style="color:#e74c3c">Reflexão Critíca</h3>
            
            <p>Este trabalho permitiu-nos consolidar e dar uma aplicação mais prática aos conceitos
               leccionados durante todo o semestre nas Unidades Curriculares de <strong>GCS</strong> e <strong>PRI</strong>.
            </p>
            
            <p>Revelou-se um projeto bastante interessante e útil na medida em que através da sua
               realização foi possível melhorarmos (e até aprendermos!) muito os nossos conhecimentos
               em termos de aplicações <em>Web</em>.
            </p>
            
            <p>É sempre positivo poder praticar o uso de novas tecnologias, como foi o caso do <em>PHP</em> que nunca haviamos utilizado ou mesmo o <em>javascript</em>. 
            </p>
            
            <p>Em termos de gramáticas foi também interessante perceber que podem ser bastante utilizáveis
               e úteis em casos reais.
            </p>
            
            <p>O maior obstáculo que encontramos na realização deste trabalho foi o facto de o <em>PHP</em> não suportar o <em>XSL 2.0</em>, o que fez com que tivessemos que encontrar alternativas para o <em>xsl:result-document</em> de forma a poder gerar documentos através do <em>XSL</em>.
            </p>
            
            <a name="d1e826"></a>
            
            <h3 style="color:#e74c3c">Trabalho Futuro</h3>
            
            <p>Como trabalho futuro fica , antes de mais, tornar a plataforma mais apelativa e atual
               visualmente. 
            </p>
            
            <p>Gostariamos ainda de alargá-la de forma a lidar com mais informação (cursos, obras,
               compositores, grupos de alunos) e criar funcionalidades de registo de vários tipos
               de utilizador (alunos, professores, gerentes das escolas) de forma a que se tornasse
               uma plataforma completa para uma escola de música em que se pudessem,por exemplo,
               marcar aulas e gerir horários
            </p>
            
            
         </div>
         <hr>
         <hr>
      </div>
   </body>
</html>